# 需求文档

## 简介

此功能旨在让新用户在首次安装应用程序后的30秒内体验到"惊喜时刻"。当用户没有配置任何集群时，系统将为他们提供快速加载只读演示集群的选项，通过引导式交互展示应用程序的核心功能。

## 需求

### 需求 1

**用户故事：** 作为一个没有配置集群的新用户，我希望能够快速访问演示集群，这样我就能立即了解应用程序的价值，而无需配置自己的 Kubernetes 集群。

#### 验收标准

1. 当用户首次打开应用程序且没有配置集群时，系统应显示"添加集群"页面，并提供醒目的"加载演示集群"选项
2. 当用户点击"加载演示集群"时，系统应在5秒内从编译时内嵌的 READONLY_DEMO 地址下载加密的 kubeconfig
3. 当加密的 kubeconfig 下载完成时，系统应使用内嵌的公钥解密并将其添加到集群列表
4. 当演示集群成功添加时，系统应自动导航到集群视图并启动引导教程

### 需求 2

**用户故事：** 作为体验演示集群的新用户，我希望被引导了解关键功能，这样我就能有效地理解如何使用应用程序。

#### 验收标准

1. 当演示集群加载完成时，系统应显示引导组件，突出显示 Pod 列表功能
2. 当用户完成查看 Pod 列表时，引导应指导他们查看最近 Pod 的实时日志
3. 当用户查看 Pod 日志时，引导应向他们展示应用程序中可用的其他关键功能
4. 当引导教程完成时，系统应提供继续探索演示或添加自己集群的选项

### 需求 3

**用户故事：** 作为新用户，我希望演示集群被清楚地标识为只读，这样我就能理解其限制和用途。

#### 验收标准

1. 当演示集群显示在集群列表中时，应清楚地标记为"演示"或"只读"指示器
2. 当用户尝试在演示集群上执行写操作时，系统应显示适当的消息说明只读性质
3. 当查看演示集群时，通常允许修改的所有 UI 元素应被禁用或隐藏

### 需求 4

**用户故事：** 作为开发者，我希望演示集群配置在编译时安全地内嵌，这样它就不会被篡改并提供一致的体验。

#### 验收标准

1. 当应用程序构建时，READONLY_DEMO 地址应作为编译时常量内嵌
2. 当应用程序构建时，用于解密的公钥应通过环境变量或构建脚本安全地注入，不得提交到代码仓库
3. 当下载演示集群 kubeconfig 时，应在使用前验证预期签名
4. 如果演示集群下载或解密失败，系统应优雅地处理错误并提供替代的入门选项

### 需求 5

**用户故事：** 作为产品经理，我希望跟踪演示集群的使用情况，这样我就能衡量入门体验的有效性。

#### 验收标准

1. 当用户加载演示集群时，系统应记录"demo_cluster_loaded"分析事件
2. 当用户完成引导教程的每个步骤时，系统应记录进度事件
3. 当用户从演示转换到添加自己的集群时，系统应记录转换事件
4. 当记录分析事件时，应包含时间信息以衡量30秒目标

### 需求 6

**用户故事：** 作为用户，我希望演示体验能在网络连接有限的情况下工作，这样网络问题就不会阻止我评估应用程序。

#### 验收标准

1. 当由于网络问题导致演示集群 kubeconfig 下载失败时，系统应回退到本地内嵌的演示配置
2. 当使用回退演示配置时，系统仍应提供引导教程体验
3. 当网络连接恢复时，系统应可选地与远程演示集群同步以获取更新内容