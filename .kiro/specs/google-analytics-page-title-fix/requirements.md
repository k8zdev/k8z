# Google Analytics 页面标题修复需求文档

## 介绍

当前 Google Analytics 埋点存在页面标题上报问题，大量事件显示为 "(not set)"，导致无法准确追踪用户的页面访问行为。通过代码分析发现，当前的 `logScreenView` 实现只传递了 `screenName` 参数，但没有正确设置页面标题信息，导致 Google Analytics 无法获取到有意义的页面标题数据。

## 需求

### 需求 1: 页面标题数据收集

**用户故事:** 作为产品分析师，我希望在 Google Analytics 中能看到准确的页面标题信息，以便分析用户的页面访问行为和路径。

#### 验收标准

1. WHEN 用户访问任何页面 THEN 系统应该收集并上报准确的页面标题到 Google Analytics
2. WHEN 页面标题发生变化 THEN 系统应该自动更新 Analytics 中的页面标题信息
3. WHEN 页面没有明确标题 THEN 系统应该使用合理的默认标题而不是 "(not set)"

### 需求 2: 多语言页面标题支持

**用户故事:** 作为国际化应用的用户，我希望页面标题能够根据我的语言设置正确显示，以便在 Analytics 中按语言进行数据分析。

#### 验收标准

1. WHEN 用户切换语言 THEN 页面标题应该使用对应语言的文本
2. WHEN 系统上报页面标题到 Analytics THEN 应该包含当前语言标识符
3. IF 某个页面标题没有对应语言翻译 THEN 系统应该使用英文作为默认标题

### 需求 3: 页面层级和上下文信息

**用户故事:** 作为数据分析师，我希望页面标题能够包含页面层级和上下文信息，以便更好地理解用户的导航路径。

#### 验收标准

1. WHEN 用户访问集群相关页面 THEN 页面标题应该包含当前集群名称
2. WHEN 用户访问资源详情页面 THEN 页面标题应该包含资源类型和名称
3. WHEN 用户访问命名空间相关页面 THEN 页面标题应该包含命名空间信息
4. WHEN 页面标题过长 THEN 系统应该合理截断但保留关键信息

### 需求 4: Analytics 事件增强

**用户故事:** 作为开发者，我希望 Analytics 事件能够包含更丰富的上下文信息，以便进行更精确的用户行为分析。

#### 验收标准

1. WHEN 系统上报页面访问事件 THEN 应该包含页面标题、路由路径、用户语言等信息
2. WHEN 用户在特定集群上下文中操作 THEN 事件应该包含集群标识信息
3. WHEN 发生页面导航 THEN 系统应该记录来源页面和目标页面信息
4. IF Analytics 上报失败 THEN 系统应该记录错误日志但不影响用户体验

### 需求 5: 页面标题一致性

**用户故事:** 作为用户体验设计师，我希望应用中显示的页面标题与 Analytics 中记录的标题保持一致，以确保数据的准确性。

#### 验收标准

1. WHEN 页面 AppBar 显示标题 THEN Analytics 中记录的标题应该与之一致
2. WHEN 页面标题动态变化 THEN Analytics 应该实时更新标题信息
3. WHEN 页面使用自定义标题格式 THEN Analytics 标题应该遵循相同的格式规范
4. WHEN 系统生成默认标题 THEN 应该使用统一的命名规范